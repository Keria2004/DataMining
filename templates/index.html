<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Food Recommendation System</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style/styles.css') }}">
  <style>
    /* Căn chỉnh form */
    .form-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 300px;
      margin: 0 auto;
    }

    .dropdown-container {
      position: relative;
    }

    #ingredientInput {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    #cluster {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      padding: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }

    .results-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .dish-card {
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 5px;
      width: 200px;
      text-align: center;
    }

    .dish-card img {
      width: 100%;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <header>Food Recommendation System</header>
  <div class="main-container">
    <!-- Form -->
    <div class="form-container">
      <h2>Enter Ingredients and Calories</h2>
      <form action="/suggest" method="POST">
        <div class="dropdown-container">
          <input type="text" id="ingredientInput" name="ingredients" placeholder="Type ingredients..." onfocus="showDropdown()" oninput="filterIngredients()" required>
          <div class="dropdown-list" id="dropdownList"></div>
        </div>
        <input type="number" id="calories" name="calories" placeholder="Enter max calories" min="1">
        
        <!-- Lọc theo nhóm -->
        <select name="cluster" id="cluster">
          <option value="">Cluster (Optional)</option>
          {% for i in range(5) %} <!-- 5 nhóm nếu bạn sử dụng 5 clusters -->
            <option value="{{ i }}">Cluster {{ i }}</option>
          {% endfor %}
        </select>

        <button type="submit">Suggest Recipes</button>
      </form>
      <div class="tag-list" id="tagList"></div>
    </div>

    <!-- Results -->
    <div class="results-container">
      {% if cuisines %}
        {% for dish in cuisines %}
          <div class="dish-card">
            <img src="{{ dish.images }}" alt="Dish Image">
            <h3>{{ dish.name }}</h3>
            <p>Cuisine: {{ dish.cuisine }}</p>
            <p>Calories: {{ dish.calories }}</p>
            <p>Cluster: {{ dish.cluster }}</p>  <!-- Hiển thị nhóm món ăn -->
          </div>
        {% endfor %}
      {% else %}
        <div class="no-results">No results found. Try other ingredients!</div>
      {% endif %}
    </div>
  </div>

  <div id="ingredient-data" data-ingredients='{{ ingredients_list | tojson | safe }}' style="display:none;"></div>
  <script src="{{ url_for('static', filename='script/scripts.js') }}"></script>
</body>
</html>
